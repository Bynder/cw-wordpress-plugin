/*! GatherContent Importer - v3.0.0 - 2016-06-17 | http://www.gathercontent.com | Copyright (c) 2016 GatherContent | Licensed GPLv2 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";b.exports=Backbone.Collection.extend({getById:function(a){return this.find(function(b){return b.get("id")===a})}})},{}],2:[function(a,b,c){"use strict";b.exports=function(a){return a.collections.base.extend({model:a.models.tabRow,initialize:function(a,b){this.tab=b.tab},getById:function(a){return this.find(function(b){return b.get("id")===a})},showTab:function(a){var b=this.getById(a);b&&(this.invoke("set",{hidden:!0}),b.set("hidden",!1),this.trigger("render"))}})}},{}],3:[function(a,b,c){"use strict";b.exports=function(a){return a.collections.base.extend({model:a.models.tab,showTab:function(a){var b=this.getById(a);b&&(this.invoke("set",{hidden:!0}),b.set("hidden",!1),this.trigger("render"))}})}},{}],4:[function(a,b,c){"use strict";window.GatherContent=window.GatherContent||{},function(b,c,d,e,f){e.mapping=e.mapping||{};var g=e.mapping;g.models={base:a("./models/base.js")},g.collections={base:a("./collections/base.js")},g.views={base:a("./views/base.js")},g.models.tabRow=a("./models/tab-row.js")(g),g.collections.tabRows=a("./collections/tab-rows.js")(g),g.views.tabRow=a("./views/tab-row.js")(g,e._meta_keys),g.models.tab=a("./models/tab.js")(g),g.collections.tabs=a("./collections/tabs.js")(g),g.views.tab=a("./views/tab.js")(g),g.views.tabLink=a("./views/tab-link.js")(g),g.views.defaultTab=a("./views/default-tab.js")(g),g.views.tabs=a("./views/tabs.js")(g),g.init=function(){g.mappingView=new g.views.tabs({collection:new g.collections.tabs(e._tabs)})},d(g.init)}(window,document,jQuery,window.GatherContent)},{"./collections/base.js":1,"./collections/tab-rows.js":2,"./collections/tabs.js":3,"./models/base.js":5,"./models/tab-row.js":6,"./models/tab.js":7,"./views/base.js":8,"./views/default-tab.js":9,"./views/tab-link.js":10,"./views/tab-row.js":11,"./views/tab.js":12,"./views/tabs.js":13}],5:[function(a,b,c){"use strict";b.exports=Backbone.Model.extend({sync:function(){return!1}})},{}],6:[function(a,b,c){"use strict";b.exports=function(a){return a.models.base.extend({defaults:{id:"",label:"",name:"",field_type:"",post_type:"wp-type-post",field_value:!1,expanded:!1},_get:function(b,c){switch(c){case"post_type":a.defaults&&(b=a.defaults.get("post_type"))}return b},get:function(b){return this._get(a.models.base.prototype.get.call(this,b),b)},toJSON:function(){return _.mapObject(a.models.base.prototype.toJSON.call(this),_.bind(this._get,this))}})}},{}],7:[function(a,b,c){"use strict";b.exports=function(a){return a.models.base.extend({defaults:{id:"",label:"",hidden:!1,navClasses:"",viewId:"tab",linkViewId:"tabLink",rows:[]},initialize:function(){this.rows=new a.collections.tabRows(this.get("rows"),{tab:this})}})}},{}],8:[function(a,b,c){"use strict";b.exports=Backbone.View.extend({toggleExpanded:function(a){this.model.set("expanded",!this.model.get("expanded"))},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}})},{}],9:[function(a,b,c){"use strict";b.exports=function(a){return a.views.tab.extend({events:{"change select":"changeDefault","click .gc-reveal-items":"toggleExpanded"},changeDefault:function(a){var b=jQuery(a.target),c=b.val(),d=b.data("column");if(c){if(b.data("select2")){var e=b.select2("data")[0];e.text&&this.model.set("select2:"+d+":"+c,e.text)}this.model.set(d,c)}},render:function(){var a=this.model.toJSON();this.$el.html(this.template(a));var b=wp.template("gc-mapping-defaults-tab");return this.$el.find("tbody").html(b(a)),this.$(".gc-select2").each(function(){var a=jQuery(this),b=a.data();a.select2({width:"250px",ajax:{url:b.url,data:function(a){return{q:a.term,column:b.column}},delay:250,cache:!0},minimumInputLength:2})}),this}})}},{}],10:[function(a,b,c){"use strict";b.exports=function(a){return a.views.base.extend({tagName:"a",id:function(){return"tabtrigger-"+this.model.get("id")},className:function(){return"nav-tab "+(this.model.get("hidden")?"":"nav-tab-active")+" "+this.model.get("navClasses")},render:function(){return this.$el.text(this.model.get("label")).attr("href","#"+this.model.get("id")),this}})}},{}],11:[function(a,b,c){"use strict";b.exports=function(a,b){return a.views.base.extend({tagName:"tr",template:wp.template("gc-mapping-tab-row"),events:{"change .wp-type-select":"changeType","change .wp-type-value-select":"changeValue","click  .gc-reveal-items":"toggleExpanded"},initialize:function(){this.listenTo(this.model,"change:field_type",this.render),this.metaKeys=new(a.collections.base.extend({model:a.models.base.extend({defaults:{value:""}}),getByValue:function(a){return this.find(function(b){return b.get("value")===a})}}))(b)},changeType:function(a){this.model.set("field_type",jQuery(a.target).val())},changeValue:function(a){var b=jQuery(a.target).val();""===b?(this.model.set("field_value",""),this.model.set("field_type","")):this.model.set("field_value",b)},render:function(){var a=this.model.get("field_value");a&&!this.metaKeys.getByValue(a)&&this.metaKeys.add({value:a});var b=this.model.toJSON();return b.metaKeys=this.metaKeys.toJSON(),this.$el.html(this.template(b)),this.$(".gc-select2").each(function(){var a=jQuery(this),b={width:"250px"};a.hasClass("gc-select2-add-new")&&(b.tags=!0),a.select2(b)}),this}})}},{}],12:[function(a,b,c){"use strict";b.exports=function(a){return a.views.base.extend({template:wp.template("gc-tab-wrapper"),tagName:"fieldset",id:function(){return this.model.get("id")},className:function(){return"gc-template-tab "+(this.model.get("hidden")?"hidden":"")},render:function(){this.$el.html(this.template(this.model.toJSON()));var b=document.createDocumentFragment();return this.model.rows.each(function(c){var d=new a.views.tabRow({model:c}).render();b.appendChild(d.el)}),this.$el.find("tbody").html(b),this}})}},{}],13:[function(a,b,c){"use strict";b.exports=function(a){return Backbone.View.extend({el:"#mapping-tabs",template:function(){return wp.template("gc-tabs-wrapper")},initialize:function(){this.listenTo(this.collection,"change:label",this.labelChange),this.listenTo(this.collection,"render",this.render),this.listenTo(this,"render",this.render),this.render(),a.defaults=this.collection.getById("mapping-defaults")},events:{"click .nav-tab":"tabClick","click .nav-tab-link":"triggerClick"},triggerClick:function(a){a.preventDefault(),this.$('.nav-tab[href="'+jQuery(a.target).attr("href")+'"]').trigger("click")},tabClick:function(a){a.preventDefault();var b=jQuery(a.target).attr("href").substring(1);this.$el.attr("class",b),this.collection.showTab(b)},labelChange:function(a){this.render()},render:function(){return this.$el.html(this.template()),this.appendViewItems(".nav-tab-wrapper","linkViewId"),this.appendViewItems(".gc-template-tab-group","viewId"),this},appendViewItems:function(b,c){var d=document.createDocumentFragment();this.collection.each(function(b){var e=b.get(c),f=new a.views[e]({model:b});d.appendChild(f.render().el)}),this.$el.find(b).append(d)}})}},{}]},{},[4]);