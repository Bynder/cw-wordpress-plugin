/*! GatherContent Importer - v3.0.0 - 2016-06-30 | http://www.gathercontent.com | Copyright (c) 2016 GatherContent | Licensed GPLv2 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";b.exports=Backbone.Collection.extend({getById:function(a){return this.find(function(b){var c=b.get("id");return c===a||c&&a&&c==a})}})},{}],2:[function(a,b,c){"use strict";b.exports=function(a){return a.collections.base.extend({model:a.models.post})}},{}],3:[function(a,b,c){"use strict";window.GatherContent=window.GatherContent||{},function(b,c,d,e,f){e.general=e.general||{};var g=e.general;a("./initiate-objects.js")(g),g.models.post=a("./models/post.js")(g),g.collections.posts=a("./collections/posts.js")(g),g.views.postRow=a("./views/post-row.js")(g,e),g.views.statusSelect2=a("./views/status-select2.js")(g),g.views.postRows=a("./views/post-rows.js")(g,e,d),g.getPosts=function(){var a=[];return d(".gc-status-column").each(function(){a.push(d(this).data())}),a},g.monkeyPatchQuickEdit=function(a){var c=b.inlineEditPost.edit;b.inlineEditPost.edit=function(){c.apply(this,arguments),a.apply(this,arguments)}},g.ajaxResponse=function(a){a.success&&(g.generalView=new g.views.postRows({collection:new g.collections.posts(a.data)}),g.monkeyPatchQuickEdit(function(){g.generalView.trigger("quickEdit",arguments,this)}))},g.init=function(){d(c.body).addClass("gathercontent-admin-select2"),d.post(b.ajaxurl,{action:"gc_get_items",posts:g.getPosts(),flush_cache:!!e.queryargs.flush_cache},g.ajaxResponse)},d(g.init)}(window,document,jQuery,window.GatherContent)},{"./collections/posts.js":2,"./initiate-objects.js":4,"./models/post.js":6,"./views/post-row.js":8,"./views/post-rows.js":9,"./views/status-select2.js":10}],4:[function(a,b,c){"use strict";b.exports=function(b){b.models={base:a("./models/base.js")},b.collections={base:a("./collections/base.js")},b.views={base:a("./views/base.js")}}},{"./collections/base.js":1,"./models/base.js":5,"./views/base.js":7}],5:[function(a,b,c){"use strict";b.exports=Backbone.Model.extend({sync:function(){return!1}})},{}],6:[function(a,b,c){"use strict";b.exports=function(a){return a.models.base.extend({defaults:{id:0,item:0,mapping:0,status:{},statuses:[],statusesChecked:!1,statusSetting:{}}})}},{}],7:[function(a,b,c){"use strict";b.exports=Backbone.View.extend({toggleExpanded:function(a){this.model.set("expanded",!this.model.get("expanded"))},getRenderedModels:function(a,b){b=b||this.collection;var c=document.createDocumentFragment();return b.each(function(b){var d=new a({model:b}).render();c.appendChild(d.el)}),c},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}})},{}],8:[function(a,b,c){"use strict";b.exports=function(a){return a.views.base.extend({template:wp.template("gc-post-column-row"),tagName:"span",className:"gc-status-column",id:function(){return"gc-status-row-"+this.model.get("id")},html:function(){return this.template(this.model.toJSON())}})}},{}],9:[function(a,b,c){"use strict";b.exports=function(a,b,c){var d;return a.views.statusSelect2.extend({template:wp.template("gc-status-select2"),el:"#posts-filter tbody",width:"200px",events:{"change .gc-select2":"storeStatus"},initialize:function(){d=this,this.listenTo(this,"quickEdit",this.edit),this.render()},storeStatus:function(a){var b=jQuery(a.target),c=b.val(),d=this.collection.getById(b.data("id"));d.set("setStatus",c)},edit:function(a,e){var f=0;if("object"==typeof a&&(f=parseInt(e.getId(a),10)),this.waitSpinner(f),f){var g=this.collection.getById(f);return g.get("statusesChecked")?this.renderStatuses(g):void c.post(window.ajaxurl,{action:"gc_get_post_statuses",postId:f,flush_cache:!!b.queryargs.flush_cache},this.ajaxResponse).done(function(){d.renderStatuses(g)})}},ajaxResponse:function(a){if(a.data){var b=d.collection.getById(a.data.postId);b&&(b.set("statusesChecked",!0),a.success&&(b.set("statuses",a.data.statuses),b.get("statuses").length&&(d.$(".gc-select2").each(function(){c(this).select2("destroy")}),d.renderStatuses(b))))}},renderStatuses:function(a){var c=a.get("id");this.editSelect(c).html(this.template(a.toJSON())),a.get("statuses").length&&this.renderSelect2(b.$id("edit-"+c))},waitSpinner:function(a){this.editSelect(a).html('<span class="spinner"></span>')},editSelect:function(a){return b.$id("edit-"+a).find(".inline-edit-group .gc-status-select2")},render:function(){return this.collection.each(function(c){var d=new a.views.postRow({model:c}).html(),e=b.$id("post-"+c.get("id")).find(".column-gathercontent");e.html(d)}),this}})}},{}],10:[function(a,b,c){"use strict";b.exports=function(a){var b;return a.views.base.extend({select2ItemTemplate:wp.template("gc-select2-item"),width:"250px",renderSelect2:function(a){var c=a?a.find(".gc-select2"):this.$(".gc-select2");return b=this,c.each(function(){var a=jQuery(this),c=a.data();a.select2(b.select2Args(c));var d=a.data("select2");d.$results.addClass("select2-"+c.column),d.$container.addClass("select2-"+c.column)}),this},select2Args:function(a){var c={width:b.width};return c.templateResult=function(a,c){var d=jQuery.extend(a,jQuery(a.element).data());return d.description=!1===c?!1:d.description||"",jQuery(b.select2ItemTemplate(a))}.bind(b),c.templateSelection=function(a){return c.templateResult(a,!1)},c}})}},{}]},{},[3]);